<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BSN: BSN implementation on ROS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BSN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">BSN implementation on ROS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a Body <a class="el" href="classSensor.html">Sensor</a> Network implementation on ROS. So far, the BSN was used for experimentation on solutions for adaptation on the Self-Adaptive Software Systems domain, refer to <a href="https://doi.org/10.1145/3194133.3194147">https://doi.org/10.1145/3194133.3194147</a> and <a href="https://doi.org/10.1109/SEAMS.2019.00020">https://doi.org/10.1109/SEAMS.2019.00020</a> for more information. Moreover, information regarding the prototype behaviour and how to develop your own manager is provided in the <a href="https://bodysensornetwork.herokuapp.com/">https://bodysensornetwork.herokuapp.com/</a> website, which contains an executable instance of the BSN. The following instructions will guide you to to compile, deploy and run the BSN on Linux Ubuntu 18.04 with ROS Melodic distributions. We have not yet tested on other distributions.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Dependencies:</h1>
<ul>
<li><a href="http://wiki.ros.org/melodic">Ros Melodic</a> which provides software libraries for BSN engines.</li>
<li><a href="https://github.com/Microsoft/cpprestsdk">Cpp rest Sdk</a> which implements HTTP protocols on C++ (get, post...)</li>
<li><a href="https://github.com/rdinizcal/lepton">Lepton</a> ("lightweight expression parser") is a small C++ library for parsing, evaluating, differentiating, and analyzing mathematical expressions.</li>
<li><a href="https://github.com/rdinizcal/libbsn">Bsn Library</a> provides the implementation of sensors, data fusers and emergency detection</li>
<li><a href="https://github.com/rdinizcal/arch">Bsn arch</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Install dependencies:</h1>
<h3><a class="anchor" id="autotoc_md6"></a>
ROS:</h3>
<p>First it is required to install ROS Melodic. Our development team is strictly using Ubuntu 18.04 (Bionic). To install it please follow this <a href="http://wiki.ros.org/melodic/Installation/Ubuntu">link</a>. <br  />
 Also, it is strongly advised to use catkin for managing the ROS packages, refer to this <a href="http://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment">link</a> after installing ROS Melodic. As such you will need to create a catkin workspace. You can do so by following the steps:</p>
<div class="fragment"><div class="line">mkdir -p ~/catkin_ws/src</div>
<div class="line">cd ~/catkin_ws/</div>
<div class="line">catkin_make</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
CPP rest sdk:</h3>
<p>In order to use Cpp rest sdk, it is required to build its dependency source code. <br  />
 First install the dependencies.</p>
<div class="fragment"><div class="line">sudo apt-get install g++ git libboost-atomic-dev libboost-thread-dev libboost-system-dev libboost-date-time-dev libboost-regex-dev libboost-filesystem-dev libboost-random-dev libboost-chrono-dev libboost-serialization-dev libwebsocketpp-dev openssl libssl-dev ninja-build</div>
</div><!-- fragment --><p>Then, clone the repository.</p>
<div class="fragment"><div class="line">git clone https://github.com/Microsoft/cpprestsdk.git casablanca</div>
</div><!-- fragment --><p>And finally, build it. </p><div class="fragment"><div class="line">cd casablanca</div>
<div class="line">mkdir build.debug</div>
<div class="line">cd build.debug</div>
<div class="line">cmake -G Ninja .. -DCMAKE_BUILD_TYPE=Debug</div>
<div class="line">sudo ninja install</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md8"></a>
Lepton:</h3>
<ol type="1">
<li>First, create and enter build folder. <div class="fragment"><div class="line">cd lepton</div>
</div><!-- fragment --> <div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
</div><!-- fragment --></li>
<li>Execute cmake from the build folder. <div class="fragment"><div class="line">cmake ..</div>
</div><!-- fragment --></li>
<li>Finally, compile and install lepton library. <div class="fragment"><div class="line">sudo make install</div>
</div><!-- fragment --></li>
</ol>
<h3><a class="anchor" id="autotoc_md9"></a>
Libbsn:</h3>
<ol type="1">
<li>Create and enter build folder. <div class="fragment"><div class="line">cd libbsn</div>
</div><!-- fragment --> <div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
</div><!-- fragment --></li>
<li>Execute cmake from the build folder. <div class="fragment"><div class="line">cmake ..</div>
</div><!-- fragment --></li>
<li>Finally, compile and install libbsn library. <div class="fragment"><div class="line">sudo make install</div>
</div><!-- fragment --> Once ALL the dependencies have been successfully installed, you can proceed to the next steps.</li>
</ol>
<h1><a class="anchor" id="autotoc_md10"></a>
Compiling BSN and arch lib</h1>
<ol type="1">
<li>Compile under 'catkin_ws' directory. <div class="fragment"><div class="line">cd ~/catkin_ws/ &amp;&amp; </div>
<div class="line">catkin_make</div>
</div><!-- fragment --> </li>
</ol>
<h1><a class="anchor" id="autotoc_md11"></a>
Configuration and Execution</h1>
<ol type="1">
<li>Configure roslaunch files for personalized execution under '/catkin_ws/src/bsn/configurations';</li>
<li>Execute the BSN either by executing the pre-set run.sh file, that executes all nodes, or use roslaunch x.launch to execute a single node: <div class="fragment"><div class="line">cd ~/catkin_ws/src/bsn/ &amp;&amp; </div>
<div class="line">bash run.sh</div>
</div><!-- fragment --></li>
</ol>
<h3><a class="anchor" id="autotoc_md12"></a>
In case or error due to the ROS path</h3>
<p>You might want to source the setup.bash inside the catkin workspace: </p><div class="fragment"><div class="line">echo &quot;source ~/catkin_ws/devel/setup.bash&quot; &gt;&gt; ~/.bashrc</div>
<div class="line">source ~/.bashrc</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md13"></a>
Main Authors</h1>
<ul>
<li><b>Ricardo D. Caldas</b> - <a href="https://github.com/rdinizcal">https://github.com/rdinizcal</a></li>
<li><b>Gabriel Levi</b> - <a href="https://github.com/gabrielevi10">https://github.com/gabrielevi10</a></li>
<li><b>Léo Moraes</b> - <a href="https://github.com/leooleo">https://github.com/leooleo</a> <br  />
</li>
<li><b>Eric B. Gil</b> - <a href="https://github.com/ericbg27/">https://github.com/ericbg27/</a></li>
</ul>
<p>Adviser: <b>Genaína N. Rodrigues</b> - <a href="https://cic.unb.br/~genaina/">https://cic.unb.br/~genaina/</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
